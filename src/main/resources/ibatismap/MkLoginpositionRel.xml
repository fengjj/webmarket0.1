<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">


<sqlMap namespace="MkLoginpositionRel">


	<sql id="select-all-column">
	SELECT
		login_no AS loginNo,
		position_id AS positionId,
		eff_time AS effTime,
		exp_time AS expTime	
	FROM mk_loginposition_rel
	</sql>
	
	<sql id="where-all-condition">
		<dynamic prepend=" WHERE ">
			<isNotNull property="loginNo" prepend="and">
				<isNotEmpty property="loginNo">
					login_no = #loginNo#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="positionId" prepend="and">
				<isNotEmpty property="positionId">
					position_id = #positionId#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="effTimeStart" prepend="and">
				<isNotEmpty property="effTimeStart">
					<![CDATA[ eff_time >= #effTimeStart# ]]>
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="effTimeEnd" prepend="and">
				<isNotEmpty property="effTimeEnd">
					<![CDATA[ eff_time <= #effTimeEnd# ]]>
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="expTimeStart" prepend="and">
				<isNotEmpty property="expTimeStart">
					<![CDATA[ exp_time >= #expTimeStart# ]]>
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="expTimeEnd" prepend="and">
				<isNotEmpty property="expTimeEnd">
					<![CDATA[ exp_time <= #expTimeEnd# ]]>
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</sql>

	<select id="selectPositionIdByLginNo" parameterClass="java.util.Map" resultClass="java.lang.String">
		SELECT
		position_id AS positionId
		from mk_loginposition_rel
		where login_no=#loginNo#
	</select>
	
	<select id="selectLoginInfoByPositionId" parameterClass="java.lang.String" resultClass="java.util.HashMap">
		select b.login_no as loginNo,b.login_name as loginName,b.valid_flag as validFlag,a.position_id as positionId from mk_loginposition_rel a,mk_loginmsg_dict b
		where a.login_no=b.login_no and a.position_id=#positionId#
	</select>
	
	<!-- 
	<select id="selectMkLoginpositionRel" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		<include refid="select-all-column"/>
		<include refid="where-all-condition"/>
	</select>
	 
	<insert id="insertMkLoginpositionRel" parameterClass="java.util.Map">
	<![CDATA[
	INSERT INTO mk_loginposition_rel
	]]>
	<dynamic prepend=" (  ">
		<isNotNull property="loginNo" prepend=",">
			<isNotEmpty property="loginNo">
				login_no
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="positionId" prepend=",">
			<isNotEmpty property="positionId">
				position_id
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="effTime" prepend=",">
			<isNotEmpty property="effTime">
				eff_time
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="expTime" prepend=",">
			<isNotEmpty property="expTime">
				exp_time
			</isNotEmpty>
		</isNotNull>
		</dynamic>
	    <dynamic prepend=" ) VALUES (  ">
		<isNotNull property="loginNo" prepend=",">
			<isNotEmpty property="loginNo">
				#loginNo#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="positionId" prepend=",">
			<isNotEmpty property="positionId">
				#positionId#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="effTime" prepend=",">
			<isNotEmpty property="effTime">
				#effTime#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="expTime" prepend=",">
			<isNotEmpty property="expTime">
				#expTime#
			</isNotEmpty>
		</isNotNull>
	</dynamic>
	
	)
	</insert>
	
	<update id="updateMkLoginpositionRel" parameterClass="java.util.Map">
	UPDATE mk_loginposition_rel
	<dynamic prepend=" SET ">
		<isNotNull property="loginNo" prepend=",">
		    <isNotEmpty property="loginNo">
			    login_no = #loginNo#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="positionId" prepend=",">
		    <isNotEmpty property="positionId">
			    position_id = #positionId#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="effTime" prepend=",">
		    <isNotEmpty property="effTime">
			    eff_time = #effTime#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="expTime" prepend=",">
		    <isNotEmpty property="expTime">
			    exp_time = #expTime#
			</isNotEmpty>
		</isNotNull>
	</dynamic>

	<include refid="where-all-condition"/>
	</update>
	

	<delete id="deleteMkLoginpositionRel" parameterClass="java.util.Map">
	DELETE FROM mk_loginposition_rel
	<include refid="where-all-condition"/>
	</delete>
	
	<select id="selectMkLoginpositionRelParam" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		<isEmpty property="S">
			SELECT
			login_no AS loginNo,
			position_id AS positionId,
			eff_time AS effTime,
			exp_time AS expTime
		</isEmpty>
		<isNotEmpty property="S">
			SELECT $S$
		</isNotEmpty>
		 	FROM mk_loginposition_rel $W$
	</select>
	-->
</sqlMap>
